会议介绍了新版Omni Proxy的调度算法，分享了其技术方案、核心优势和实验数据，并展望了后续优化和应对新推理框架的需求。

## 小结
**1. Omni Adaptive Scheduling (OAS) 算法介绍**
- 该算法旨在替代原有的global proxy算法，是Omniproxy中的全局自适应调度方案。
- 设计目标是兼顾不同维度的调度最优：ABC模型感知调度，实时负载感知调度，以及冲突最优调度。

**2. 算法输入与信号感知**
- **Request Level**: 通过Redis Tree精确捕捉请求（request）的长度及与每个预处理实例（P）的匹配深度，以实现更精准的APC匹配。
- **Instance Level**: 维护实例的运行队列和等待队列，并利用历史共享内存中存储的batch执行时间信息，进行在线负载预测。

**3. 核心实施策略与优势**
- **独立调度机制**: 明确区分了prefetch和decoding两种调度的差异。prefetch采用SPT（最短处理时间优先）以优化ttft，而decoding则采用LPT（最长处理时间优先）以实现负载均衡。
- **Nginx增强能力**: 扩展了Nginx模块，实现了对请求的延迟操作，从而可以在P侧和D侧分别积攒请求进行排序，有效近似实现复杂的调度策略，这是算法领先的核心来源之一。

**4. 实验成果与验证**
- **性能指标**: 在QPM上达到600的性能突破，在TTFT、TPOT等关键指标上均取得优异表现。
- **对比优势**: 相较于上一代PDScore，在QBM上有明显提升，并显著降低了99延迟。
- **ABC感知效果**: 在缓存友好型负载场景下，通过重复发送相同请求的实验，验证了算法在prefetch上有24%的提升，并全面优于上一代算法。

## 待办
**1. Omni Proxy 调度优化**
- 完成request body构造工作，以便全面支持SGLang等新推理框架的“先D后P”调度模式。此工作将在近期完成。

**2. 提供辅助资料**
- 在近期一两周内完成并提供Omni Proxy的Wiki文档和指导说明。

## 录屏
https://www.bilibili.com/video/BV1u2kkBgELy/